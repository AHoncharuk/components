include ../link/link

mixin card(data)
  //- card для аккордеона
  if data.accId
    //- данные передеются через параметры
    if data.item
      +b(class='card')&attributes(attributes)
        +e(class='header' role='tab')
          +link()(data-toggle='collapse'
                  data-parent='#'+data.accId
                  href='#'+data.accId+'-'+data.index 
                  aria-expanded='true'
                  aria-controls=data.accId+'-'+data.index)= data.item.header 
        //- элемент будет открыт после загрузки страницы
        if data.item.show
          +e(id=data.accId+'-'+data.index 
            class='collapse collapse collapse--show' 
            role='tabpanel' 
            aria-labelledby=data.accId+'heading'+'-'+data.index)
            +e(class='block')
              if data.item.title
                +e('h4')(class='title')= data.item.title
              if data.item.text
                +e('p')(class='text')= data.item.text
        //- остальные элементы
        else
          +e(id=data.accId+'-'+data.index 
            class='collapse collapse'
            role='tabpanel'
            aria-labelledby=data.accId+'heading'+'-'+data.index)
            +e(class='block')
              if data.item.title
                +e('h4')(class='title')= data.item.title
              if data.item.text
                +e('p')(class='text')= data.item.text
    //- данные частично передаются через параметры, но так же предусмотрена
    //- возможность передачи любой разметки, как вложенных элементов
    else
      +b(class='card')&attributes(attributes)
        +e(class='header' role='tab')
          +link()(data-toggle='collapse'
                  data-parent='#'+data.accId
                  href='#'+data.accId+'-'+data.index 
                  aria-expanded='true'
                  aria-controls=data.accId+'-'+data.index)= data.header
        //- элемент будет открыт после загрузки страницы
        if data.show
          +e(id=data.accId+'-'+data.index 
            class='collapse collapse collapse--show'
            role='tabpanel' 
            aria-labelledby=data.accId+'heading'+'-'+data.index)
            +e(class='block')
              if data.title
                +e('h4')(class='title')= data.title
              if data.text
                +e('p')(class='text')= data.text
              block
        //- остальные элементы
        else
          +e(id=data.accId+'-'+data.index 
            class='collapse collapse' 
            role='tabpanel'
            aria-labelledby=data.accId+'heading'+'-'+data.index)
            +e(class='block')
              if data.title
                +e('h4')(class='title')= data.title
              if data.text
                +e('p')(class='text')= data.text
              block
  //- card в единичном экземпляре
  else
    +b(class='card')&attributes(attributes)
      //- заголовок
      if(data.header)
        +e(class='header' role='tab')= data.header
      //- картинка вверху
      else if(data.image && data.image.position === 'top' || data.image && data.image.position === 'overlay')
        +e('img')(src=data.image.src class='img' alt=data.image.name)
      //- картинка поверх контента
      if(data.image.position === 'overlay')
        +e(class='img-overlay')
          if data.title
            +e('h4')(class='title')= data.title
          if data.text  
            +e('p')(class='text')= data.text
          block
      //- блок с контентом
      else
        +e(class='block')
          if data.title
            +e('h4')(class='title')= data.title
          if data.text  
            +e('p')(class='text')= data.text
          block
      //- картинка внизу
      if(data.image && data.image.position === 'bottom')
        +e('img')(src=data.image.src class='img' alt=data.image.name)
